package com.api.registracijaVozila.service;

import java.util.ArrayList;
import java.util.List;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import com.api.registracijaVozila.dao.VoziloDao;
import com.api.registracijaVozila.dto.VoziloDto;
import com.api.registracijaVozila.repository.VoziloRepository;
import com.api.registracijaVozila.response.MessageResponse;

@Service
public class VoziloServiceImpl implements VoziloService {

	@Autowired
	VoziloRepository voziloRepositroy;

	@Override
	public List<VoziloDto> sveVozila() {
		
		List<VoziloDao> empListDb = voziloRepositroy.findAll();
		List<VoziloDto> resultList = new ArrayList<VoziloDto>();
		
		if (empListDb.isEmpty()) {
			return resultList;
		}
		
		for (VoziloDao voziloDao : empListDb) {
			VoziloDto novoVoziloDto = new VoziloDto();
			novoVoziloDto.setId(voziloDao.getId());
			novoVoziloDto.setRegistracijskaOznaka(voziloDao.getRegistracijskaOznaka());
			
			resultList.add(novoVoziloDto);
		}
		
		return resultList;
	}

	@Override
	public MessageResponse createVozilo(VoziloDto vozilo) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public MessageResponse updateVozilo(Integer id, VoziloDto vozilo) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public void deleteVozilo(Integer id) {
		if (voziloRepositroy.getById(id).getId().equals(id)) {
			boolean exist = voziloRepositroy.existsById(id);
			
			if(!exist) {
				throw new IllegalStateException("Vozilo with id " + id + "does not exist");
			}
			
			voziloRepositroy.deleteById(id);
		}
	}
}
